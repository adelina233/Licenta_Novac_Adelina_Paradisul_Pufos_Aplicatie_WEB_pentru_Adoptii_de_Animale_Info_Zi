<div class="pt-5">
  <div class="container">
    <div class="row">
      <h1 mat-dialog-title>Completează datele pentru donație</h1>
      <div mat-dialog-content>
        <ng-container *ngIf="step === 1">
          <form [formGroup]="amountForm">
            <div class="form-group">
              <label
                >Suma de donat<span class="required"
                  >* (valoarea este in RON)</span
                ></label
              >
              <input
                class="form-control input-field"
                matInput
                formControlName="amount"
                [ngClass]="{
                  'is-invalid': isFieldInvalid(amountForm, 'amount')
                }"
              />
              <div
                *ngIf="isFieldInvalid(amountForm, 'amount')"
                class="invalid-feedback"
              >
                Suma este obligatorie și trebuie să fie un număr.
              </div>
            </div>
            <div
              mat-dialog-actions
              style="display: flex; gap: 10px; justify-content: center"
            >
              <button class="btn btn-primary" (click)="onCancel()">
                Anulează
              </button>
              <button
                class="btn btn-secondary"
                (click)="onContinue()"
                [disabled]="amountForm.invalid"
              >
                Continuă
              </button>
            </div>
          </form>
        </ng-container>

        <ng-container *ngIf="step === 2">
          <form [formGroup]="donationForm">
            <div class="form-group">
              <label>Nume pe card<span class="required">*</span></label>
              <input
                class="form-control input-field"
                matInput
                formControlName="cardName"
                [ngClass]="{
                  'is-invalid': isFieldInvalid(donationForm, 'cardName')
                }"
              />
              <div
                *ngIf="isFieldInvalid(donationForm, 'cardName')"
                class="invalid-feedback"
              >
                Numele de pe card este obligatoriu.
              </div>
            </div>

            <div class="form-group">
              <label>Număr card<span class="required">*</span></label>
              <input
                class="form-control input-field"
                matInput
                formControlName="cardNumber"
                [ngClass]="{
                  'is-invalid': isFieldInvalid(donationForm, 'cardNumber')
                }"
              />
              <div
                *ngIf="isFieldInvalid(donationForm, 'cardNumber')"
                class="invalid-feedback"
              >
                Numărul cardului trebuie să fie de 16 cifre.
              </div>
            </div>

            <div class="form-group">
              <label>Data de expirare<span class="required">*</span></label>
              <input
                class="form-control input-field"
                matInput
                formControlName="expirationDate"
                [ngClass]="{
                  'is-invalid': isFieldInvalid(donationForm, 'expirationDate')
                }"
              />
              <div
                *ngIf="isFieldInvalid(donationForm, 'expirationDate')"
                class="invalid-feedback"
              >
                Data de expirare trebuie să fie în format MM/YY.
              </div>
            </div>

            <div class="form-group">
              <label>Cod CVV<span class="required">*</span></label>
              <input
                class="form-control input-field"
                matInput
                formControlName="cvv"
                [ngClass]="{
                  'is-invalid': isFieldInvalid(donationForm, 'cvv')
                }"
              />
              <div
                *ngIf="isFieldInvalid(donationForm, 'cvv')"
                class="invalid-feedback"
              >
                Codul CVV trebuie să fie de 3 sau 4 cifre.
              </div>
            </div>
          </form>
          <div
            mat-dialog-actions
            style="display: flex; gap: 10px; justify-content: center"
          >
            <button class="btn btn-primary" (click)="onCancel()">
              Anulează
            </button>
            <button
              class="btn btn-secondary"
              (click)="onSubmit()"
              [disabled]="donationForm.invalid"
            >
              Donează
            </button>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
